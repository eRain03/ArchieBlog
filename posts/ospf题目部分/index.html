<!DOCTYPE html>
<html><head lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>OSPF题目部分 - Archie</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议
注意要求

按照IP 地址从小到大的顺序发布
每个 prefix-list 的序号从 5 开始 按照 IP 地址从小到大的顺序递增 5
route-map 的序号从 10 开始  递增 10  route-map 名称与 prefix-list 名称相同
每个 ACL 序号从 10 开始,按照 IP 地址从小到大的顺序递增 10

OSPFv2部分
SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议

 进程1 区域号 0 分别发布 Loopback1 地址路由和产品路由
 FW1通告 type1默认路由
 RT2 与 AC1 之间运行 OSPFv2 协议,进程 1 区域 1 nssa no-summar
 AC1 发布 Loopback1 地址路由、管理、产品和营销路由
 AC1用 prefix-list 重发布 Loopback3  prefix-list 名称为 AC1-Loopback3-IPv4

SW1" />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="http://localhost:1313/posts/ospf%E9%A2%98%E7%9B%AE%E9%83%A8%E5%88%86/">
  <meta property="og:site_name" content="Archie">
  <meta property="og:title" content="OSPF题目部分">
  <meta property="og:description" content="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list 的序号从 5 开始 按照 IP 地址从小到大的顺序递增 5 route-map 的序号从 10 开始 递增 10 route-map 名称与 prefix-list 名称相同 每个 ACL 序号从 10 开始,按照 IP 地址从小到大的顺序递增 10 OSPFv2部分 SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议 进程1 区域号 0 分别发布 Loopback1 地址路由和产品路由 FW1通告 type1默认路由 RT2 与 AC1 之间运行 OSPFv2 协议,进程 1 区域 1 nssa no-summar AC1 发布 Loopback1 地址路由、管理、产品和营销路由 AC1用 prefix-list 重发布 Loopback3 prefix-list 名称为 AC1-Loopback3-IPv4 SW1">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-12T08:45:15+08:00">
    <meta property="article:modified_time" content="2024-07-12T08:45:15+08:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="OSPF题目部分">
  <meta name="twitter:description" content="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list 的序号从 5 开始 按照 IP 地址从小到大的顺序递增 5 route-map 的序号从 10 开始 递增 10 route-map 名称与 prefix-list 名称相同 每个 ACL 序号从 10 开始,按照 IP 地址从小到大的顺序递增 10 OSPFv2部分 SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议 进程1 区域号 0 分别发布 Loopback1 地址路由和产品路由 FW1通告 type1默认路由 RT2 与 AC1 之间运行 OSPFv2 协议,进程 1 区域 1 nssa no-summar AC1 发布 Loopback1 地址路由、管理、产品和营销路由 AC1用 prefix-list 重发布 Loopback3 prefix-list 名称为 AC1-Loopback3-IPv4 SW1">

        <link href="http://localhost:1313/css/fonts.fc4f5a86e8e498b54fe94f415531b7bee28ca405d2160b9e55715b497c716193.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.33535ad1c7d1e61eae52b59547ac79afb3639df98fc2cc22dc2ae9f5a063c72c.css" /><script type="text/javascript"
		src="http://localhost:1313/js/MathJax.js"></script>
		
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script><link rel="stylesheet" href="http://localhost:1313/katex/katex.min.css ">
		<script defer src="http://localhost:1313/katex/katex.min.js"></script>
		<script defer src="http://localhost:1313/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
					renderMathInElement(document.body, {
							delimiters: [
									{left: "$$", right: "$$", display: true},
									{left: "$", right: "$", display: false}
							]
					});
			});
		</script>
		
		
		<link rel="stylesheet" type="text/css" href="http://localhost:1313/css/first.354eb93defa843f69983dc6df53d6af8dc2bf3d3cd5c8970c6c4f1ca724da3ef.css">
		
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="http://localhost:1313/">Archie</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">Posts</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		
	</nav>

</header>

<main>
  <article>
    <div class="post-container">
      
      <div class="post-content">
        <div class="title">
          <h1 class="title">OSPF题目部分</h1>
          <div class="meta">Posted on Jul 12, 2024</div>
        </div>
        
        <section class="body">
          <h2 id="sw1sw2sw3rt1-以太链路rt2-以太链路fw1fw2ac1-之间运行-ospfv2-和-ospfv3-协议">SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议</h2>
<h3 id="注意要求">注意要求</h3>
<ul>
<li>按照IP 地址从小到大的顺序发布</li>
<li>每个 prefix-list 的序号从 5 开始 按照 IP 地址从小到大的顺序递增 5</li>
<li>route-map 的序号从 10 开始  递增 10  route-map 名称与 prefix-list 名称相同</li>
<li>每个 ACL 序号从 10 开始,按照 IP 地址从小到大的顺序递增 10</li>
</ul>
<h3 id="ospfv2部分">OSPFv2部分</h3>
<h4 id="sw1sw2sw3rt1rt2fw1-之间-ospfv2-和-ospfv3-协议">SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议</h4>
<ul>
<li><input checked="" disabled="" type="checkbox"> 进程1 区域号 0 分别发布 Loopback1 地址路由和产品路由</li>
<li><input checked="" disabled="" type="checkbox"> FW1通告 type1默认路由</li>
<li><input checked="" disabled="" type="checkbox"> RT2 与 AC1 之间运行 OSPFv2 协议,进程 1 区域 1 nssa no-summar</li>
<li><input checked="" disabled="" type="checkbox"> AC1 发布 Loopback1 地址路由、管理、产品和营销路由</li>
<li><input checked="" disabled="" type="checkbox"> AC1用 prefix-list 重发布 Loopback3  prefix-list 名称为 AC1-Loopback3-IPv4</li>
</ul>
<p>SW1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span> ospf router-id 10.4.1.1
</span></span><span style="display:flex;"><span> network 10.4.1.1/32 area 0
</span></span><span style="display:flex;"><span> network 10.4.11.0/24 area 0
</span></span><span style="display:flex;"><span> network 10.4.220.0/24 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.0/30 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.4/30 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.12/30 area 0
</span></span><span style="display:flex;"><span> network 192.168.2.0/24 area 0
</span></span><span style="display:flex;"><span>!
</span></span></code></pre></div><p>SW2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span> ospf router-id 10.4.2.1
</span></span><span style="display:flex;"><span> network 10.4.2.1/32 area 0
</span></span><span style="display:flex;"><span> network 10.4.21.0/24 area 0
</span></span><span style="display:flex;"><span> network 10.4.210.0/24 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.0/30 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.8/30 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.20/30 area 0
</span></span><span style="display:flex;"><span> network 192.168.100.0/24 area 0
</span></span></code></pre></div><p>SW3</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span> ospf router-id 10.4.3.1
</span></span><span style="display:flex;"><span> network 10.4.3.1/32 area 0
</span></span><span style="display:flex;"><span> network 10.4.31.0/24 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.4/30 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.8/30 area 0
</span></span><span style="display:flex;"><span>!
</span></span></code></pre></div><p>AC1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span> ospf router-id 10.4.4.1
</span></span><span style="display:flex;"><span> area 1 nssa no-summary
</span></span><span style="display:flex;"><span> network 10.4.4.1/32 area 1
</span></span><span style="display:flex;"><span> network 10.4.130.0/24 area 1
</span></span><span style="display:flex;"><span> network 10.4.140.0/24 area 1
</span></span><span style="display:flex;"><span> network 10.4.150.0/24 area 1
</span></span><span style="display:flex;"><span> network 10.4.255.44/30 area 1
</span></span><span style="display:flex;"><span>redistribute connected route-map AC1-Loopback3-IPv4
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32
</span></span><span style="display:flex;"><span>route-map AC1-Loopback3-IPv4 permit 10
</span></span><span style="display:flex;"><span>  match ip address prefix-list AC1-Loopback3-IPv4
</span></span></code></pre></div><blockquote>
<p>配置nssa特区
area 1 nssa no-summary</p>
</blockquote>
<p>配置 prefix-list 序号为5 匹配 Loopback4 地址
<code>ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32</code>
配置 route-map 序号为 10 匹配AC1-Loopback3-IPv4 通过</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>route-map AC1-Loopback3-IPv4 permit 10
</span></span><span style="display:flex;"><span>  match ip address prefix-list AC1-Loopback3-IPv4
</span></span></code></pre></div><p>过滤重发布
<code>redistribute connected route-map AC1-Loopback3-IPv4</code></p>
<p>RT1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span> router-id 10.4.5.1
</span></span><span style="display:flex;"><span> network 10.4.5.1 255.255.255.255 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.16 255.255.255.252 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.20 255.255.255.252 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.32 255.255.255.252 area 0
</span></span></code></pre></div><p>RT2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span> router-id 10.4.6.1
</span></span><span style="display:flex;"><span> network 10.4.6.1 255.255.255.255 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.32 255.255.255.252 area 0
</span></span><span style="display:flex;"><span> network 10.4.255.44 255.255.255.252 area 1
</span></span><span style="display:flex;"><span> area 1 nssa no-summary
</span></span></code></pre></div><blockquote>
<p>配置nssa特区
area 1 nssa no-summary</p>
</blockquote>
<p>FW1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>  router ospf 1
</span></span><span style="display:flex;"><span>    router-id 10.4.7.1
</span></span><span style="display:flex;"><span>    default-information originate always type 1
</span></span><span style="display:flex;"><span>    network 10.4.7.1/32 area 0
</span></span><span style="display:flex;"><span>    network 10.4.255.12/30 area 0
</span></span><span style="display:flex;"><span>    network 10.4.255.16/30 area 0
</span></span></code></pre></div><blockquote>
<p>FW1通告type1默认路由
default-information originate always type 1</p>
</blockquote>
<p>FW2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>  router ospf 2
</span></span><span style="display:flex;"><span>    router-id 10.4.8.1
</span></span><span style="display:flex;"><span>    network 10.4.8.1/32 area 2
</span></span><span style="display:flex;"><span>    network 10.4.255.24/30 area 2
</span></span><span style="display:flex;"><span>    network 10.4.255.28/30 area 2
</span></span></code></pre></div><ul>
<li><input checked="" disabled="" type="checkbox"> RT1  FW2  SW3 模拟办事处之间运行 OSPFv2协议  进程 2 区域 2</li>
<li><input checked="" disabled="" type="checkbox"> SW3 模拟办事处发布 Loopback2、产品和营销路由</li>
<li><input checked="" disabled="" type="checkbox"> FW2发布 Loopback1 路由。</li>
<li><input checked="" disabled="" type="checkbox"> RT1 发布 Loopback4 路由,向该区域通告 type1默认路由</li>
<li><input checked="" disabled="" type="checkbox"> RT1 用 prefix-list 匹配 SW3 模拟办事处 Loopback2 和产品路由、 FW2 Loopback1 路由(prefix-list 名称分别为 SW3-FW2-IPv4</li>
<li><input checked="" disabled="" type="checkbox"> RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4)  以上路由重发布到 process 1</li>
</ul>
<p>RT1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 2
</span></span><span style="display:flex;"><span> router-id 10.4.5.4
</span></span><span style="display:flex;"><span> network 10.4.5.4 255.255.255.255 area 2
</span></span><span style="display:flex;"><span> network 10.4.255.24 255.255.255.252 area 2
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span> default-information originate always metric-type 1
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div><p>FW2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>  router ospf 2
</span></span><span style="display:flex;"><span>    router-id 10.4.8.1
</span></span><span style="display:flex;"><span>    network 10.4.8.1/32 area 2
</span></span><span style="display:flex;"><span>    network 10.4.255.24/30 area 2
</span></span><span style="display:flex;"><span>    network 10.4.255.28/30 area 2
</span></span></code></pre></div><p>SW3</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>router ospf 2 vrf Office
</span></span><span style="display:flex;"><span> ospf router-id 10.4.3.2
</span></span><span style="display:flex;"><span> network 10.4.3.2/32 area 2
</span></span><span style="display:flex;"><span> network 10.4.110.0/24 area 2
</span></span><span style="display:flex;"><span> network 10.4.120.0/24 area 2
</span></span><span style="display:flex;"><span> network 10.4.255.28/30 area 2
</span></span><span style="display:flex;"><span>!
</span></span></code></pre></div><p>重发布</p>
<p>prefix-list 匹配 SW3 模拟办事处 Loopback2  产品路由  FW2 Loopback1 路由prefix-list 名称为 SW3-FW2-IPv4</p>
<p>RT1</p>
<p>配置prefix-list</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ip prefix-list SW3-FW2-IPv4 seq 5 permit 10.4.3.2/32
</span></span><span style="display:flex;"><span>ip prefix-list SW3-FW2-IPv4 seq 10 permit 10.4.8.1/32
</span></span><span style="display:flex;"><span>ip prefix-list SW3-FW2-IPv4 seq 15 permit 10.4.110.0/24
</span></span></code></pre></div><p>配置route-map</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>route-map SW3-FW2-IPv4 10 permit
</span></span><span style="display:flex;"><span> match ip address prefix-list SW3-FW2-IPv4
</span></span></code></pre></div><p>重发布到 进程 1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span>redistribute ospf 2 route-map SW3-FW2-IPv4
</span></span></code></pre></div><p>RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4)  以上路由重发布到 process 1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ip prefix-list RT1-FW2-IPv4 seq 5 permit 10.4.255.24/30
</span></span><span style="display:flex;"><span>route-map RT1-FW2-IPv4 10 permit
</span></span><span style="display:flex;"><span> match ip address prefix-list RT1-FW2-IPv4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>router ospf 1
</span></span><span style="display:flex;"><span>  redistribute connect route-map RT1-FW2-IPv4
</span></span></code></pre></div><ul>
<li>修改 ospf cost 为 100,实现 SW1 分别与 RT2、FW2 之间 IPv4 和 IPv6互访流量优先通过 SW1-SW2-RT1 链路转发,SW2 访问 Internet IPv4和 IPv6 流量优先通过 SW2-SW1-FW1 链路转发
<img src="https://s2.loli.net/2024/07/12/N9vc3wxyAZslrYQ.png" alt="21-14-22.png"></li>
</ul>
<blockquote>
<p>四条链路全部配置Cost花费100</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 ospf cost 100 
</span></span></code></pre></div><h3 id="ospfv6部分">OSPFv6部分</h3>
<ul>
<li><input checked="" disabled="" type="checkbox"> SW1、SW2、SW3、RT1、RT2、FW1 OSPFv3 协议process1  area 0  分别发布Loopback1 地址路由和产品路由   FW1 通告 type1默认路由</li>
<li><input checked="" disabled="" type="checkbox"> RT2 与 AC1 之间运行 OSPFv3 协议,process 1,area 1 stub no-summary</li>
<li><input checked="" disabled="" type="checkbox"> AC1 发布 Loopback1 地址路由、管理、产品和营销路由</li>
<li><input checked="" disabled="" type="checkbox"> RT1、FW2、SW3 模拟办事处之间运行 OSPFv3 协议  process2  area 2</li>
<li><input checked="" disabled="" type="checkbox"> SW3 模拟办事处发布 Loopback2、产品和营销路由  FW2发布 Loopback1 路由 RT1 发布 Loopback4 路由  向该区域通告 type1默认路由</li>
<li><input checked="" disabled="" type="checkbox"> RT1 用 prefix-list 匹配 SW3 模拟办事处 Loopback2 和产品路由、 FW2 Loopback1 路由(prefix-list 名称分别为 SW3-FW2-IPv4和 SW3-FW2-IPv6)、RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4),以上路由重发布到 process 1。</li>
</ul>
<p>SW1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>router ipv6 ospf 1
</span></span><span style="display:flex;"><span> router-id 10.4.1.1
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>router ipv6 ospf 2 vrf Finance
</span></span><span style="display:flex;"><span> router-id 10.4.1.2
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Vlan1019
</span></span><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.14 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1020
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.5 255.255.255.252
</span></span><span style="display:flex;"><span>!         
</span></span><span style="display:flex;"><span>interface Vlan1023
</span></span><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.1 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1024
</span></span><span style="display:flex;"><span> ip vrf forwarding Finance
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.255.1 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Loopback1
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:1::1/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.1.1 255.255.255.255
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Loopback2
</span></span><span style="display:flex;"><span> ip vrf forwarding Finance
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:1::2/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.1.2 255.255.255.255
</span></span><span style="display:flex;"><span>!
</span></span></code></pre></div><p>SW2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface Vlan21
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:21::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Vlan1019
</span></span><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.22 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1020
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.9 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1023
</span></span><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.2 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1024
</span></span><span style="display:flex;"><span> ip vrf forwarding Finance
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.255.2 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Loopback1
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:2::1/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Loopback2
</span></span><span style="display:flex;"><span> ip vrf forwarding Finance
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:2::2/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.2.2 255.255.255.255
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>router ipv6 ospf 1
</span></span><span style="display:flex;"><span> router-id 10.4.2.1
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>router ipv6 ospf 2 vrf Finance
</span></span><span style="display:flex;"><span> router-id 10.4.2.2
</span></span></code></pre></div><p>SW3</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface Vlan31
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:31::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.31.1 255.255.255.0
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Vlan110
</span></span><span style="display:flex;"><span> ip vrf forwarding Office
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:110::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.110.1 255.255.255.0
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan120
</span></span><span style="display:flex;"><span> ip vrf forwarding Office
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:120::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.120.1 255.255.255.0
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1015
</span></span><span style="display:flex;"><span> ip vrf forwarding Office
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.255.30 255.255.255.252
</span></span><span style="display:flex;"><span>!         
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Vlan1019
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.6 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan1020
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.10 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Loopback1
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:3::1/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 0 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.3.1 255.255.255.255
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Loopback2
</span></span><span style="display:flex;"><span> ip vrf forwarding Office
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:3::2/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 2 tag 2
</span></span><span style="display:flex;"><span> ip address 10.4.3.2 255.255.255.255
</span></span><span style="display:flex;"><span>!
</span></span></code></pre></div><p>AC1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface Vlan130
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:130::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 1 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.130.1 255.255.255.0
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan140
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:140::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 1 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.140.1 255.255.255.0
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Vlan150
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:150::1/64
</span></span><span style="display:flex;"><span> ipv6 router ospf area 1 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.150.1 255.255.255.0
</span></span><span style="display:flex;"><span>!       
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Vlan1001
</span></span><span style="display:flex;"><span> ipv6 router ospf area 1 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.255.46 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>interface Loopback1
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:4::1/128
</span></span><span style="display:flex;"><span> ipv6 router ospf area 1 tag 1
</span></span><span style="display:flex;"><span> ip address 10.4.4.1 255.255.255.255
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>router ipv6 ospf 1
</span></span><span style="display:flex;"><span> router-id 10.4.4.1
</span></span><span style="display:flex;"><span> area 1 stub no-summary
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div><p>RT1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospfv3 1
</span></span><span style="display:flex;"><span> router-id 10.4.5.1
</span></span><span style="display:flex;"><span> redistribute ospf 2 route-map SW3-FW2-IPv6
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>router ospfv3 2
</span></span><span style="display:flex;"><span> router-id 10.4.5.4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Loopback1
</span></span><span style="display:flex;"><span> ip address 10.4.5.1 255.255.255.255
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:5::1/128
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 0 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Loopback4
</span></span><span style="display:flex;"><span> ip address 10.4.5.4 255.255.255.255
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:5::4/128
</span></span><span style="display:flex;"><span> ipv6 ospf 2 area 2 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface GigaEthernet0/0
</span></span><span style="display:flex;"><span> ip address 10.4.255.33 255.255.255.252
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 0 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface GigaEthernet0/1
</span></span><span style="display:flex;"><span> ip address 10.4.255.18 255.255.255.252
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 0 
</span></span><span style="display:flex;"><span> ipv6 ospf cost 100 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface GigaEthernet0/2
</span></span><span style="display:flex;"><span> ip address 10.4.255.21 255.255.255.252
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ip ospf cost 100
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 0 
</span></span><span style="display:flex;"><span> ipv6 ospf cost 100 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface GigaEthernet0/3
</span></span><span style="display:flex;"><span> ip address 10.4.255.25 255.255.255.252
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ipv6 ospf 2 area 2 
</span></span></code></pre></div><p>RT2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>router ospfv3 1
</span></span><span style="display:flex;"><span> router-id 10.4.6.5
</span></span><span style="display:flex;"><span> area 1 stub no-summary
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface Loopback1
</span></span><span style="display:flex;"><span> ip address 10.4.6.1 255.255.255.255
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ipv6 address 2001:10:4:6::1/128
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 0 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface GigaEthernet0/0
</span></span><span style="display:flex;"><span> ip address 10.4.255.34 255.255.255.252
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 0 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface GigaEthernet0/1
</span></span><span style="display:flex;"><span> ip address 10.4.255.45 255.255.255.252
</span></span><span style="display:flex;"><span> ipv6 enable
</span></span><span style="display:flex;"><span> ipv6 ospf 1 area 1 
</span></span></code></pre></div><p>FW1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface ethernet0/1
</span></span><span style="display:flex;"><span>  zone  &#34;trust&#34;
</span></span><span style="display:flex;"><span>  ip address 10.4.255.13 255.255.255.252
</span></span><span style="display:flex;"><span>  ipv6 enable
</span></span><span style="display:flex;"><span>  manage ping
</span></span><span style="display:flex;"><span>  ip ospf cost 100
</span></span><span style="display:flex;"><span>  ipv6 ospf 1 area 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface ethernet0/2
</span></span><span style="display:flex;"><span>  zone  &#34;trust&#34;
</span></span><span style="display:flex;"><span>  ip address 10.4.255.17 255.255.255.252
</span></span><span style="display:flex;"><span>  ipv6 enable
</span></span><span style="display:flex;"><span>  manage ping
</span></span><span style="display:flex;"><span>  ip ospf cost 100
</span></span><span style="display:flex;"><span>  ipv6 ospf 1 area 0
</span></span><span style="display:flex;"><span>exit
</span></span></code></pre></div><p>FW2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface ethernet0/1
</span></span><span style="display:flex;"><span>  zone  &#34;dmz&#34;
</span></span><span style="display:flex;"><span>  ip address 10.4.255.26 255.255.255.252
</span></span><span style="display:flex;"><span>  ipv6 enable
</span></span><span style="display:flex;"><span>  manage ping
</span></span><span style="display:flex;"><span>  ipv6 ospf 2 area 2
</span></span><span style="display:flex;"><span>exit
</span></span><span style="display:flex;"><span>interface ethernet0/2
</span></span><span style="display:flex;"><span>  zone  &#34;trust&#34;
</span></span><span style="display:flex;"><span>  ip address 10.4.255.29 255.255.255.252
</span></span><span style="display:flex;"><span>  ipv6 enable
</span></span><span style="display:flex;"><span>  manage ping
</span></span><span style="display:flex;"><span>  ipv6 ospf 2 area 2
</span></span><span style="display:flex;"><span>exit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interface loopback1
</span></span><span style="display:flex;"><span>  zone  &#34;trust&#34;
</span></span><span style="display:flex;"><span>  ip address 10.4.8.1 255.255.255.255
</span></span><span style="display:flex;"><span>  ipv6 enable
</span></span><span style="display:flex;"><span>  ipv6 address 2001:10:4:8::1/128
</span></span><span style="display:flex;"><span>  manage ping
</span></span><span style="display:flex;"><span>  ipv6 ospf 2 area 2
</span></span></code></pre></div><p>重发布</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>route-map SW3-FW2-IPv6 10 permit
</span></span><span style="display:flex;"><span> match ipv6 address prefix-list SW3-FW2-IPv6
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>ipv6 prefix-list SW3-FW2-IPv6 seq 5 permit 2001:10:4:3::2/128
</span></span><span style="display:flex;"><span>ipv6 prefix-list SW3-FW2-IPv6 seq 10 permit 2001:10:4:8::1/128
</span></span><span style="display:flex;"><span>ipv6 prefix-list SW3-FW2-IPv6 seq 15 permit 2001:10:4:110::/64
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>router ospfv3 1
</span></span><span style="display:flex;"><span> router-id 10.4.5.1
</span></span><span style="display:flex;"><span> redistribute ospf 2 route-map SW3-FW2-IPv6
</span></span></code></pre></div>
        </section>
        <div class="post-tags">
          
          
          
        </div>
      </div>

      
      
    </div>

    <div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        var disqus_shortname = '未淼';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
</article>
</main>
<footer>
</footer>

</div>
    </body>
</html>
